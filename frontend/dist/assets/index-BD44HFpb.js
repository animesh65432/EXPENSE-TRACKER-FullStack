import{r as d,u as f,a as b,b as S,c as m,L as R,I as w,n as p,d as $,R as e,e as O,f as P,g as x,h as G,B as M,P as _}from"./vendor-react-DYDgc4_S.js";import{O as C,P as y,Q as z}from"./vendor-DKvktieU.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const L=C({name:"Expenses",initialState:{values:[]},reducers:{Getexpenses:(t,a)=>{t.values=a.payload},deleteexpenses:(t,a)=>{const s=a.payload,l=t.values.filter(n=>n._id!=s);console.log(l),t.values=l},addexpensefromExpenseFrom:(t,a)=>{t.values=t.values.concat(a.payload)},updateexpense:(t,a)=>{const{id:s,ExpensesName:l,description:n,Category:o,Expenseamount:c}=a.payload;t.values=t.values.map(r=>r.id===s?{...r,ExpensesName:l,description:n,Category:o,Expenseamount:c}:r)}}}),{Getexpenses:W,deleteexpenses:J,addexpensefromExpenseFrom:q,updateexpense:H}=L.actions,V=L.reducer;function U(t){var a=t.split(".")[1],s=a.replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(window.atob(s).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(l)}const h="http://localhost:3000",T="https://repository-images.githubusercontent.com/419507496/cfcc1354-86ac-432e-823a-da56c21302ba",X=()=>{const[t,a]=d.useState(!1),[s,l]=d.useState(null),n=f(r=>r.user.value),o=b();return{createexpenses:async r=>{var u,g;a(!0),l(null);try{let i=await y.post(`${h}/Expenses/Create`,r,{headers:{idtoken:n}});return console.log(i),o(q({...r,_id:(g=(u=i==null?void 0:i.data)==null?void 0:u.data)==null?void 0:g._id})),!0}catch(i){return console.log(i),i.response&&i.response.data?l(i.response.data.message):l("An error occurred. Please try again later."),!1}finally{a(!1)}},loading:t,error:s}},K=()=>{const[t,a]=d.useState(!1),s=f(o=>o.user.value),l=b();return[t,async o=>{a(!0);try{let c=await y.delete(`${h}/Expenses/delete/${o}`,{headers:{idtoken:s}});return console.log(c),l(J(o)),!0}catch(c){throw new Error(c)}finally{a(!1)}}]},Z=()=>{const[t,a]=d.useState(!1),s=f(o=>o.user.value),l=b();return[t,async({currentPage:o,limit:c})=>{var r,u;a(!0),console.log(o,c);try{let g=await y.get(`${h}/Expenses/Get?page=${o}&limit=${c}`,{headers:{idtoken:s}}),i=(r=g.data)==null?void 0:r.data,E=(u=g.data)==null?void 0:u.totalItems;return l(W(i)),{totalItems:E}}catch(g){return console.log(g),{totalItems:0}}finally{a(!1)}}]},Q=()=>{const t=f(s=>s.user.value);return[async()=>{try{const s=await y.post(`${h}/Expenses/dowaloadtheexpenses`,{idToken:t},{responseType:"blob",headers:{"Content-Type":"application/json",idtoken:t}});console.log(s==null?void 0:s.data);const l=window.URL.createObjectURL(new Blob([s.data]),{type:"application/pdf"});console.log(l,"the url");const n=document.createElement("a");n.href=l,n.setAttribute("download","Expenses.pdf"),document.body.appendChild(n),n.click(),n.remove()}catch(s){throw console.error("Error downloading PDF:",s),s}}]},Y=()=>{const[t,a]=d.useState([]),s=f(n=>n.user.value),l=async()=>{var o;let n=await y.get(`${h}/paymentFeatures/ShowTheLeadersboard`,{headers:{idtoken:s}});a((o=n==null?void 0:n.data)==null?void 0:o.data)};return console.log(t),[t,l]},F=C({name:"login",initialState:{value:localStorage.getItem("idtoken"),ispremuinm:!1},reducers:{addthetokens:(t,a)=>{t.value=a.payload,localStorage.setItem("idtoken",a.payload)},deletethetokens:(t,a)=>{t.value="",localStorage.removeItem("idtoken")},makePremuinm:(t,a)=>{t.ispremuinm=a.payload}}}),{addthetokens:ee,deletethetokens:te,makePremuinm:B}=F.actions,ae=F.reducer,re=()=>{const t=f(l=>l.user.value),a=b();return[async()=>{var l;try{let n=await y.get(`${h}/userdeatils/GetUser`,{headers:{idtoken:t}}),o=n==null?void 0:n.data.data[0].ispremiumuser;return a(B(o)),(l=n==null?void 0:n.data)==null?void 0:l.data}catch(n){console.log(n)}}]},j=C({name:"User",initialState:{user:JSON.parse(localStorage.getItem("user"))||{}},reducers:{getuser:(t,a)=>{t.user=a.payload,localStorage.setItem("user",JSON.stringify(a.payload))},removeuser:t=>{t.user={},localStorage.removeItem("user")}}}),{getuser:D,removeuser:se}=j.actions,ne=j.reducer,le=()=>{const[t,a]=d.useState(!1),[s,l]=d.useState(null),n=b(),o=S();return{logintheuser:async r=>{var u,g;a(!0),l(null);try{let i=await y.post(`${h}/users/loginuser`,r);console.log(i),console.log(i==null?void 0:i.data);let E=(u=i==null?void 0:i.data)==null?void 0:u.idtoken;n(ee(E)),n(D((g=i==null?void 0:i.data)==null?void 0:g.user)),console.log(U(E));let v=U(E).ispremiumuser;return n(B(v)),o("/"),!0}catch(i){return console.log(i),i.response&&i.response.data?l(i.response.data.message):l("An error occurred. Please try again later."),!1}finally{a(!1)}},loading:t,error:s}},oe=()=>[async a=>{console.log(h,a);try{return await y.post(`${h}/Resest/forgetpassword`,a),!0}catch(s){return console.log(s),!1}}],ce=()=>[async a=>{try{return await y.put(`${h}/Resest/updatePasswords?id=${a.id}`,a),!0}catch(s){return console.log(s),!1}}],me=()=>{const[t,a]=d.useState(!1),[s,l]=d.useState(null);return{createtheuser:async o=>{a(!0),l(null);try{let c=await y.post(`${h}/users/singuptheuser`,o);return console.log(c),!0}catch(c){return c.response&&c.response.data?l(c.response.data.message):l("An error occurred. Please try again later."),!1}finally{a(!1)}},loading:t,error:s}},ie=()=>{const[t,a]=d.useState(!1),s=b(),l=f(o=>o.user.value);return[t,async o=>{a(!0);try{let c=await y.put(`${h}/Expenses/update/${o._id}`,o,{headers:{idtoken:l}});return console.log(c),s(H(o)),!0}catch(c){return console.log(c),!1}finally{a(!1)}}]},ue=()=>{const[t,a]=d.useState(!1),s=f(o=>o.user.value),l=b();return[t,async o=>{a(!0);try{const r=(await y.put(`${h}/userdeatils/Updateuser`,o,{headers:{idtoken:s}})).data.user;l(D(r))}catch(c){console.log(`errors in ${c} useUpdateUser Function`)}finally{a(!1)}}]},de=()=>{const[t,a]=d.useState({name:"",email:"",password:""}),{createtheuser:s,loading:l,error:n}=me(),o=async c=>{if(c.preventDefault(),t.name===""||t.email===""||t.password===""){p.error("Please fill out all fields");return}await s(t)?p.success("User created successfully"):p.error(n)};return React.createElement(React.Fragment,null,React.createElement("div",{className:"flex flex-col lg:flex-row justify-center items-center min-h-screen p-4 bg-gray-50"},React.createElement("div",{className:"w-full lg:w-1/2 flex justify-center"},React.createElement("img",{src:T,alt:"Expense Tracker",className:"h-44 w-auto mt-8 md:mt-0"})),React.createElement("div",{className:"w-full lg:w-1/2 mt-8 md:mt-0 p-4 bg-white shadow-lg rounded-lg"},React.createElement("form",{onSubmit:o,className:"space-y-6"},React.createElement("div",null,React.createElement("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700"},"Name"),React.createElement("input",{id:"username",type:"text",value:t.name,onChange:c=>a(r=>({...r,name:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),React.createElement("div",null,React.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700"},"Email"),React.createElement("input",{id:"email",type:"email",value:t.email,onChange:c=>a(r=>({...r,email:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),React.createElement("div",null,React.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700"},"Password"),React.createElement("input",{id:"password",type:"password",value:t.password,onChange:c=>a(r=>({...r,password:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),React.createElement("div",{className:"flex justify-center"},React.createElement(m.Button,{type:"submit",variant:"outlined",className:"w-[200px] flex justify-center py-2 px-4 "},l?React.createElement(m.Spinner,null):"Create New User"))),React.createElement("div",{className:"mt-6 text-center font-bold"},React.createElement(R,{to:"/login",className:"text-slate-600 hover:text-slate-700 text-sm"},"Already have an account? Log in")))),React.createElement(w,{position:"top-right",reverseOrder:!1}))},I=()=>{const[t,a]=d.useState({email:"test@gmail.com",password:"testpasword"}),{logintheuser:s,loading:l,error:n}=le(),o=async c=>{c.preventDefault(),t.email===""||t.password===""?p.error("Please Fill Each And Every Field"):await s(t)?p.success("Successfully logged in"):p.error(n)};return React.createElement(React.Fragment,null,React.createElement("div",{className:"flex flex-col lg:flex-row justify-center items-center min-h-screen p-4 bg-gray-50"},React.createElement("div",{className:"w-full lg:w-1/2 flex justify-center"},React.createElement("img",{src:T,alt:"Expense Tracker",className:"h-44 w-auto mt-8 lg:mt-0"})),React.createElement("div",{className:"w-full lg:w-1/2 mt-8 lg:mt-0 p-4 bg-white shadow-lg rounded-lg"},React.createElement("form",{onSubmit:o,className:"space-y-6"},React.createElement("div",null,React.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700"},"Email"),React.createElement("input",{id:"email",type:"email",value:t.email,onChange:c=>a(r=>({...r,email:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),React.createElement("div",null,React.createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700"},"Password"),React.createElement("input",{id:"password",type:"password",value:t.password,onChange:c=>a(r=>({...r,password:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),React.createElement("div",{className:"flex justify-center"},React.createElement(m.Button,{variant:"outlined",type:"submit",className:"w-[200px]"},l?React.createElement(m.Spinner,null):"log in"))),React.createElement("div",{className:"mt-6 text-center space-y-2 font-bold"},React.createElement("div",null,React.createElement(R,{to:"/",className:"text-slate-600 hover:text-slate-700 text-sm"},"Don't have an account? Create New")),React.createElement("div",null,React.createElement(R,{to:"/resetpassword",className:"text-slate-600 hover:text-slate-700 text-sm"},"Forgot Password?"))))),React.createElement(w,{position:"top-right",reverseOrder:!1}))},k=({ontoggole:t})=>{const[a,s]=d.useState({ExpensesName:"",description:"",Category:"",Expenseamount:""}),{createexpenses:l,loading:n,error:o}=X();f(r=>r.user.ispremuinm);const c=r=>{r.preventDefault();const{ExpensesName:u,description:g,Category:i,Expenseamount:E}=a;if(console.log(a),!u||!g||!i||!E)p.error("Please fill out all fields"),s({ExpensesName:"",description:"",Category:"",Expenseamount:""});else{let v=Number(a.Expenseamount);if(!v){p.error("Please enter a valid amount");return}let N={...a,Expenseamount:v};console.log(N),l(N)?p.success("Successfully created expenses"):p.error(o)}};return $.createPortal(e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center "},e.createElement(m.Card,{className:"md:w-[45%] sm:w-[55%] w-[60%] p-2"},e.createElement("form",{onSubmit:c,className:"flex flex-col gap-5"},e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"Expense Name"),e.createElement(m.Input,{size:"lg",placeholder:"ExpenseName",className:" !border-t-blue-gray-200 focus:!border-t-gray-900 ",labelProps:{className:"before:content-none after:content-none"},onChange:r=>s(u=>({...u,ExpensesName:r.target.value})),value:a.ExpensesName})),e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"Description:"),e.createElement(m.Input,{size:"lg",placeholder:"Description",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>s(u=>({...u,description:r.target.value})),value:a.description})),e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"Amount"),e.createElement(m.Input,{size:"lg",placeholder:"Amount",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>s(u=>({...u,Expenseamount:r.target.value})),value:a.Expenseamount})),e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"CateGory"),e.createElement(m.Input,{size:"lg",placeholder:"CateGory",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>s(u=>({...u,Category:r.target.value})),value:a.Category})),e.createElement("div",{className:"flex flex-col gap-1"},e.createElement(m.Button,{type:"submit"},n?e.createElement(m.Spinner,null):"Create"),e.createElement(m.Button,{onClick:t},"back")))),e.createElement(w,{position:"top-right",reverseOrder:!1})),document.getElementById("from"))},ge=()=>{const[t,a]=d.useState(""),[s]=oe(),l=n=>{n.preventDefault(),console.log(t),t.length!==0&&(s({email:t})?p.success("Please Check Your Email"):p.error("Something Went Wrong"))};return e.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4"},e.createElement("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-md"},e.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},"Look's like you Forget Something"),e.createElement("form",{onSubmit:l,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700"},"Email"),e.createElement("input",{id:"email",type:"email",onChange:n=>a(n.target.value),value:t,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),e.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"Send")),e.createElement(w,{position:"top-right",reverseOrder:!1})))},pe=()=>{const[t,a]=d.useState({newPassword:"",confirmPassword:""}),[s]=O(),l=s.get("id"),[n]=ce(),o=c=>{if(c.preventDefault(),t.newPassword===""&&t.confirmPassword===""){p.error("Please Fill both");return}else t.newPassword!==t.confirmPassword&&p.error("Password and confirm password is not same");n({newPassword:t.newPassword,id:l},l)?p.success("Successfully changed"):p.error("Something went wrong")};return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4"},e.createElement("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-md"},e.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},"Reset Password"),e.createElement("form",{onSubmit:o,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"NewPassword",className:"block text-sm font-medium text-gray-700"},"New Password"),e.createElement("input",{id:"NewPassword",type:"password",placeholder:"Please write new password here",value:t.newPassword,onChange:c=>a(r=>({...r,newPassword:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),e.createElement("div",null,e.createElement("label",{htmlFor:"ConfirmPassword",className:"block text-sm font-medium text-gray-700"},"Confirm Password"),e.createElement("input",{id:"ConfirmPassword",type:"password",placeholder:"Confirm password",value:t.confirmPassword,onChange:c=>a(r=>({...r,confirmPassword:c.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})),e.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},"Reset")))),e.createElement(w,{position:"top-right",reverseOrder:!1}))},fe="https://moneyview.in/images/blog/wp-content/uploads/2017/10/Blog-11-reasonsfeature-min.jpg",Ee=()=>{const t=S(),a=()=>{t("/leaderborads")};return React.createElement(m.Button,{onClick:a,variant:"text"},"Show the Leaderboards")},he=({navigatetoUpdateUser:t,isPremiumUser:a,Fechdata:s,handleLogout:l})=>{const[n,o]=d.useState(!1),c=()=>{o(r=>!r)};return React.createElement(React.Fragment,null,React.createElement(m.Menu,null,React.createElement(m.MenuHandler,null,React.createElement(m.Button,{className:" text-black bg-transparent border-none"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"})))),React.createElement(m.MenuList,{className:"flex flex-col"},React.createElement(m.MenuItem,null,React.createElement(m.Button,{variant:"text",onClick:t,className:"flex justify-center gap-4 items-center"},"UpdateUser")),React.createElement(m.MenuItem,null,a&&React.createElement(m.Button,{onClick:s,variant:"text",color:"primary",className:"flex  justify-center items-center gap-2"},"Upload Expense File")),React.createElement(m.MenuItem,{className:"flex justify-center items-center text-black"},a&&React.createElement(Ee,null)),React.createElement(m.MenuItem,null,React.createElement(m.Button,{variant:"text",onClick:l,className:"flex justify-center items-center"},"log out")),React.createElement(m.MenuItem,null,React.createElement(m.Button,{variant:"text",className:" flex justify-center items-center",onClick:c},"Create Expense")))),n&&React.createElement(k,{ontoggole:c}))},ye=()=>{const t=b(),a=f(r=>r.user.ispremuinm),s=f(r=>r.userDetails.user),[l]=Q(),n=S(),o=()=>{t(te()),t(se())},c=()=>{n("/userupdate")};return console.log(`Currentuser ${s.name}`),e.createElement("header",{className:"sticky top-0 z-50 bg-gray-200 w-full h-[10vh] font-mono"},e.createElement("nav",{className:"w-full flex justify-between  h-[10vh] p-6 text-slate-300 font-bold items-center"},e.createElement("div",{className:"flex items-center space-x-4"},e.createElement(R,{to:"/"},e.createElement("div",{className:"relative w-[70px] h-[40px]"},e.createElement("img",{src:fe,alt:"Logo"})))),e.createElement("div",{className:"hidden lg:flex items-center space-x-4"},e.createElement(m.Popover,{placement:"bottom"},e.createElement(m.PopoverHandler,null,e.createElement("div",null,s.image?e.createElement("img",{src:s.image,alt:"User Profile",className:"h-[7vh] w-[7vw] rounded-lg"}):e.createElement(e.Fragment,null,e.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRkr94Z9oGA_KuzX9ghnsctIEudavAJJht_VUyCDUw6c8eBeijX1Hg1RA6ckmWhBVNUlx4&usqp=CAU",className:"w-10 h-10 rounded-lg"})))),e.createElement(m.PopoverContent,null,e.createElement(m.Card,{className:"flex flex-col gap-4 p-5 font-semibold"},e.createElement("div",null,s.name),e.createElement("div",{className:"flex gap-3"},e.createElement(m.Button,{onClick:o},"logout"),e.createElement(m.Button,{onClick:c},"Update")))))),e.createElement("div",{className:"lg:hidden block"},e.createElement(he,{handleLogout:o,navigatetoUpdateUser:c,isPremiumUser:a,Fechdata:l}))))},xe=({obj:t})=>e.createElement("div",{className:"bg-white p-4 mb-4 rounded-lg shadow-md border border-gray-200"},e.createElement("h3",{className:"text-xl font-semibold mb-2"},"UserName: ",e.createElement("span",{className:"text-blue-600"},t.name)),e.createElement("h3",{className:"text-lg font-medium"},"Total Expenses:"," ",e.createElement("span",{className:"text-red-600"},"$",t.totalexpenses))),be=()=>{const[t,a]=Y();return d.useEffect(()=>{a()},[]),e.createElement("div",{className:"p-4 bg-gray-100 min-h-screen"},e.createElement("h2",{className:"text-2xl font-bold mb-6"},"Leaderboard"),e.createElement("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},t.map(s=>e.createElement(xe,{key:s.id,obj:s}))))},ve=()=>{const t=f(g=>g.userDetails.user),[a,s]=d.useState(""),[l,n]=ue(),[o,c]=d.useState({name:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",image:(t==null?void 0:t.image)||""}),r=g=>{var v;const i=(v=g.target.files)==null?void 0:v[0];if(!i)return;const E=new FileReader;E.onload=()=>{typeof E.result=="string"&&(s(E.result),c(N=>({...N,image:E.result})))},E.readAsDataURL(i)},u=async g=>{g.preventDefault();try{await n(o)}catch(i){console.error("Error updating profile:",i)}};return React.createElement("div",{className:"h-[90vh] flex items-center justify-center"},React.createElement("div",{className:"flex flex-col items-center p-4 mx-auto bg-blue-gray-50 shadow-lg rounded-lg lg:w-[30vw] md:w-[50vw] w-[70vw] gap-4"},React.createElement("img",{src:t.image||"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRkr94Z9oGA_KuzX9ghnsctIEudavAJJht_VUyCDUw6c8eBeijX1Hg1RA6ckmWhBVNUlx4&usqp=CAU",alt:"User Profile",className:"w-20 h-20 rounded-lg object-cover"}),React.createElement("div",{className:"text-lg w-full"},React.createElement("form",{className:"flex flex-col gap-4",onSubmit:u},React.createElement("div",null,React.createElement(m.Input,{type:"file",onChange:r,accept:"image/*"}),a&&React.createElement("img",{className:"w-10 h-10 mt-2 rounded object-cover",src:a,alt:"Preview"})),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("label",{htmlFor:"name"},"Name"),React.createElement(m.Input,{id:"name",value:o.name,onChange:g=>c(i=>({...i,name:g.target.value}))})),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("label",{htmlFor:"email"},"Email"),React.createElement(m.Input,{id:"email",type:"email",value:o.email,onChange:g=>c(i=>({...i,email:g.target.value}))})),React.createElement("div",{className:"flex justify-center"},React.createElement(m.Button,{type:"submit",className:"lg:w-[9vw] w-[15vw]",disabled:l},l?"Loading...":"Update"))))))},we=({expenses:t})=>{const[a,s]=K(),[l,n]=d.useState(!1),o=async r=>{try{console.log(r),await s(r),p.success("Successfully deleted")}catch(u){console.log(u,"errors in delete expense table"),p.error("Please try again")}},c=()=>{n(r=>!r)};return e.createElement(e.Fragment,null,e.createElement(m.Card,null,e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",null,e.createElement("thead",null,e.createElement("tr",{className:"border-b border-gray-200 bg-gray-50"},e.createElement("th",{className:"p-3  text-left"},"Name"),e.createElement("th",{className:"p-3  text-left"},"Amount"),e.createElement("th",{className:"p-3  text-left"},"Category"),e.createElement("th",{className:"p-3 text-left"},"Description"))),e.createElement("tbody",null,t.map((r,u)=>e.createElement("tr",{key:r==null?void 0:r._id,className:`hover:bg-gray-50 ${u!==t.length-1?"border-b border-gray-200":""}`},e.createElement("td",{className:"p-3 "},e.createElement(m.Typography,{className:"font-medium"},r==null?void 0:r.ExpensesName)),e.createElement("td",{className:"p-3"},e.createElement(m.Typography,null,"$",Number(r==null?void 0:r.Expenseamount).toLocaleString())),e.createElement("td",{className:"p-3"},e.createElement(m.Typography,null,r==null?void 0:r.Category)),e.createElement("td",{className:"p-3"},e.createElement(m.Typography,{className:"truncate max-w-xs"},r==null?void 0:r.description)),e.createElement("td",{className:"p-3"},e.createElement(m.Button,{variant:"text",onClick:()=>o(r._id)},a?e.createElement(m.Spinner,null):"Delete")),e.createElement("td",{className:"p-3"},e.createElement(m.Button,{variant:"text",onClick:c},"edit"),l&&e.createElement(Ce,{expense:r,ontoggole:c})))))))),e.createElement(w,null))},Ne=()=>{const[t,a]=d.useState(!1),s=()=>{a(l=>!l)};return React.createElement("div",{className:"flex mt-[80px] md:justify-between justify-center items-center "},React.createElement("div",{className:"ml-[40px]"},React.createElement(m.Button,{variant:"filled",onClick:s},"Create Expense")),t&&React.createElement(k,{ontoggole:s}))},Re=()=>e.createElement("div",null,e.createElement("div",null,e.createElement("div",{className:"relative w-[20vw] h-[20vh]"},e.createElement("img",{src:"/close-up-mystery-box.jpg",alt:"Mystery Box"}),e.createElement("div",{className:"text-black  font-bold sm:text-[16px] text-[8px]"},"No Expenses added")))),Ce=({expense:t,ontoggole:a})=>{console.log(t);const[s,l]=d.useState({ExpensesName:t.ExpensesName,description:t.description,Category:t.Category,Expenseamount:t.Expenseamount}),[n,o]=ie(),c=async r=>{if(r.preventDefault(),s.ExpensesName===""||s.description===""||s.Category===""||s.Expenseamount===""){p.error("Please fill each and every field");return}else try{await o({...s,_id:t._id}),p.success("Successfully updated")}catch(u){console.error(u),p.error("Please try again")}};return e.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center "},e.createElement(m.Card,{className:"md:w-[45%] sm:w-[55%] w-[60%] p-2"},e.createElement("form",{onSubmit:c},e.createElement("div",{className:"flex flex-col gap-4"},e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"Expense Name"),e.createElement(m.Input,{size:"lg",placeholder:"ExpenseName",className:" !border-t-blue-gray-200 focus:!border-t-gray-900 ",labelProps:{className:"before:content-none after:content-none"},onChange:r=>l(u=>({...u,ExpensesName:r.target.value})),value:s.ExpensesName})),e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"Description:"),e.createElement(m.Input,{size:"lg",placeholder:"Description",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>l(u=>({...u,description:r.target.value})),value:s.description})),e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"Amount"),e.createElement(m.Input,{size:"lg",placeholder:"Amount",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>l(u=>({...u,Expenseamount:r.target.value})),value:s.Expenseamount})),e.createElement("div",{className:"flex flex-col"},e.createElement(m.Typography,{variant:"h6",color:"blue-gray"},"CateGory"),e.createElement(m.Input,{size:"lg",placeholder:"CateGory",className:" !border-t-blue-gray-200 focus:!border-t-gray-900",labelProps:{className:"before:content-none after:content-none"},onChange:r=>l(u=>({...u,Category:r.target.value})),value:s.Category})),e.createElement("div",{className:"flex flex-col gap-1"},e.createElement(m.Button,{type:"submit"},n?e.createElement(m.Spinner,null):"Update"),e.createElement(m.Button,{onClick:a},"back"))))),e.createElement(w,{position:"top-right",reverseOrder:!1}))},Se=()=>{const t=f(l=>l.expenses.values)||[],[a,s]=Z();return d.useEffect(()=>{(async()=>{try{const n=await s({currentPage,limit});console.log(n)}catch(n){console.log(n)}})()},[]),a?e.createElement("div",{className:"flex justify-center items-center min-h-dvh bg-white"},e.createElement(m.Spinner,null)):e.createElement("div",{className:"bg-white h-[78vh]"},e.createElement("div",{className:"flex lg:flex-col"},e.createElement("div",{className:"lg:w-[70vw] w-full"},e.createElement(Ne,null),t.length===0?e.createElement("div",{className:" flex justify-center items-center  bg-white mt-[150px]"},e.createElement(Re,null)):e.createElement(e.Fragment,null,e.createElement("div",{className:" lg:mt-[80px] mt-[40px] lg:p-0 p-2 "},e.createElement("div",null,e.createElement(we,{expenses:t})),e.createElement("div",null)))),e.createElement("div",null)))},ke=()=>{const a=!!f(l=>l.user.value),[s]=re();return d.useEffect(()=>{a&&s()},[a]),e.createElement("div",{className:"h-[100vh]  font-mono"},a?e.createElement(e.Fragment,null,e.createElement(ye,null),e.createElement(P,null,e.createElement(x,{path:"/",element:e.createElement(Se,null)}),e.createElement(x,{path:"/leaderborads",element:e.createElement(be,null)}),e.createElement(x,{path:"/userupdate",element:e.createElement(ve,null)}),e.createElement(x,{path:"*",element:e.createElement(k,null)}))):e.createElement(e.Fragment,null,e.createElement(P,null,e.createElement(x,{path:"/",element:e.createElement(de,null)}),e.createElement(x,{path:"/login",element:e.createElement(I,null)}),e.createElement(x,{path:"/ResetPassWord",element:e.createElement(ge,null)}),e.createElement(x,{path:"/resetpasswordwithnewone",element:e.createElement(pe,null)}),e.createElement(x,{path:"*",element:e.createElement(I,null)}))))},A=C({name:"Leaderboard",initialState:{value:!1},reducers:{onClickleaderboard:(t,a)=>{t.value=!t.value}}});A.actions;const Pe=A.reducer,Ue=z({reducer:{user:ae,expenses:V,leaderBoard:Pe,userDetails:ne}});G.createRoot(document.getElementById("root")).render(e.createElement(e.StrictMode,null,e.createElement(M,null,e.createElement(_,{store:Ue},e.createElement(m.ThemeProvider,null,e.createElement(ke,null))))));
